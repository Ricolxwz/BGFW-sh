---
# 请先确保app桥接网络已经创建

services:
  nginx-proxy-manager:
      container_name: npm
      hostname: npm
      image: 'jc21/nginx-proxy-manager:latest'
      restart: always
      extra_hosts:
        - "host.docker.internal:<app网络中主机的ip>" # 请修改为主机在app网络中的ip. 若要使用host.docker.internal反代主机的服务, 请确保服务监听的ip是主机在app网卡上的ip, 或者是0.0.0.0. 如Jupyter Server服务设置监听地址为172.18.0.1:65520
      ports:
        - '80:80'
        - '443:443'
        # - '81:81'
      volumes:
        - /root/man/nginx/data:/data
        - /root/man/nginx/letsencrypt:/etc/letsencrypt
      networks:
        - app
  # portainer: # 9443
  #   container_name: portainer
  #   hostname: portainer
  #   image: portainer/portainer-ce:latest
  #   volumes:
  #     - /root/man/portainer:/data
  #     - /var/run/docker.sock:/var/run/docker.sock:ro
  #   restart: always
  #   networks:
  #     - app

networks:
  app:
    external: true
